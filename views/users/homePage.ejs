<%- include('../layouts/user/header.ejs') %>


    <style>
.brand-slideshow {
  overflow: hidden;
  padding: 20px 0;
  background-color: #f9f9f9;
}

.brand-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  width: 100%;
}

.brand-track {
  display: flex;
  width: 200%; /* Increase width to accommodate duplicates */
  animation: scroll 20s linear infinite;
}

@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); } /* Scroll halfway since we duplicated */
}

.brand-item {
  flex: none;
  width: calc(100% / 16); /* Adjust width based on number of items */
  margin: 0 15px;
}

.brand-item img {
  height: 50px;
  transition: transform 0.3s;
  display: block;
}

.brand-item:hover img {
  transform: scale(1.1);
}


        /* Top Info Bar */
        .top-info {
            background-color: #11012b;
            /* Set the background color */
            color: white;
            padding: 10px 0;
            text-align: center;
        }

        .top-info a {
            color: white;
            text-decoration: none;
            margin: 0 15px;
        }

        .top-info a:hover {
            text-decoration: underline;
        }

        /* Hero Section */
        .hero-section {
            background-color: #11012b;
            padding: 20px 0;
            /* Decrease padding to reduce whitespace */
            position: relative;
            overflow: hidden;
        }

        .hero-banner {
            position: relative;
            height: 500px;
            overflow: hidden;
            margin-bottom: 30px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .carousel {
            height: 100%;
            border-radius: 10px;
            overflow: hidden;
        }

        .carousel-inner {
            height: 100%;
        }

        .carousel-item {
            height: 100%;
            background: linear-gradient(45deg, #11012b, #2d0668);
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .carousel-control-prev,
        .carousel-control-next {
            width: 5%;
            opacity: 0.8;
        }

        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: rgba(75, 0, 130, 0.7);
            border-radius: 50%;
            padding: 20px;
        }

        .featured-products {
            display: flex;
            justify-content: center;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            /* Change from absolute to relative */
            top: -30px;
            /* Adjust for slight overlap with the carousel */
            width: 90%;
            z-index: 10;
            background-color: transparent;
            /* Ensure no background color is adding to the line */
        }

        .featured-item {
            flex: 1;
            background: rgba(74, 2, 124, 0.611);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            transition: transform 0.3s ease;
            padding: 20px;
            margin-top: 20px;
            /* Adjust as needed */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .featured-item:hover {
            transform: translateY(-5px);
        }

        .featured-item img {
            width: 100%;
            height: auto;
            max-width: 250px;
            /* Make the images larger */
            margin: 0 auto 10px auto;
            display: block;
            border-radius: 10px;
        }

        .featured-item h3,
        .featured-item p {
            color: #000000;
            /* Set text color to black */
            margin: 5px 0;
            padding: 0;
            /* Remove any padding */
            font-weight: bold;
        }

        /* Best Sellers Section */
        .best-sellers {
            padding: 60px 0;
            background-color: #0a0118;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
            color: #f8f5f5;
        }

        .section-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #f8f5f5;
        }

        .category-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-nav a {
            color: #f8f5f5;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .category-nav a:hover,
        .category-nav a.active {
            background-color: #ff0844;
            color: #fff;
        }

        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .product-card {
            background: #11012b;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-5px);
        }

        .product-image {
            position: relative;
            background: #1a0340;
        }

        .product-details {
            padding: 15px;
        }

        .product-title {
            color: #f8f5f5;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .product-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .current-price {
            color: #ff0844;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .original-price {
            color: #666;
            text-decoration: line-through;
            font-size: 0.9rem;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #f8f5f5;
        }

        .rating-stars {
            color: gold;
        }

        .product-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }

        .action-button {
            padding: 8px;
            border-radius: 5px;
            background: transparent;
            border: 1px solid #ff0844;
            color: #f8f5f5;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .action-button:hover {
            background: #ff0844;
            color: #fff;
        }

        /* Remove extra white space underneath the 3 images and above the carousel */
        .hero-section::after {
            content: "";
            display: block;
            clear: both;
            background: hwb(263 0% 83%);
            height: 1px;
            margin: 0;
            /* Remove any margin */
            padding: 0;
            /* Remove any padding */
        }
    </style>

    <section class="hero-section">
        <div class="hero-banner">
            <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/img/banner/rogbanner.png" class="d-block w-100" alt="Gaming Setup" />
                    </div>
                    <div class="carousel-item">
                        <img src="/img/banner/rogbanner.png" class="d-block w-100" alt="Gaming Accessories" />
                    </div>
                    <div class="carousel-item">
                        <img src="/img/banner/PS5banner.png" class="d-block w-100" alt="Gaming PC" />
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                    data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                    data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <div class="featured-products">
            <% topSellingProducts.forEach((product)=> { %>
                <div class="featured-item">
                    <a href="/productDetails/<%= product._id %>">
                        <img src="/img/products/<%= product.productImage[0] %>" alt="<%= product.productName %>" />
                        <h3 class="text-white fs-5">
                            <%= product.productName %>
                        </h3>
                        <p class="text-white fs-6"><span class="fw-bold text-muted">Price:</span> â‚¹<%= product.salePrice %>
                        </p>
                        <p class="text-white fs-6"><span class="fw-bold text-muted">Stock:</span>Stock left: <span class="fw-bold text-danger"><%= product.quantity %></span> 
                        </p>
                    </a>
                </div>
                <% }); %>
        </div>
    </section>

    <!-- Best Sellers Section -->
    <section class="best-sellers">
        <div class="section-header">
            <h2 class="section-title">BEST SELLER</h2>
            <div class="category-nav">
                <a href="#" class="active">All</a>
                <a href="#">Monitor and Laptop</a>
                <a href="#">Pc and Motherboards</a>
                <a href="#">Gadgets</a>
            </div>
        </div>

        <div class="product-grid">
            <% products.forEach((product)=> { %>
                <div class="product-card">
                    <a href="/productDetails/<%= product._id %>">
                        <div class="product-image">
                            <img src="/img/products/<%= product.productImage[0] %>" alt="<%= product.productName %>" />
                        </div>
                    </a>
                    <div class="product-details">
                        <h3 class="product-title">
                            <%= product.productName %>
                        </h3>
                        <div class="product-price">
                            <span class="current-price">â‚¹<%= product.salePrice %></span>
                            <span class="original-price">â‚¹<%= product.realPrice %></span>
                        </div>
                        <div class="product-rating">
                            <div class="rating-stars">
                                <% for (let i=1; i <=5; i++) { %>
                                    <i
                                        class="fas <%= i <= Math.floor(product.rating) ? 'fa-star' : (i - 0.5 <= product.rating ? 'fa-star-half-alt' : 'fa-star') %>"></i>
                                    <% } %>
                            </div>
                            <span>(<%= product.rating %>)</span>
                        </div>
                        <div class="product-actions">
                            <button class="action-button add-to-favorites"
                                onclick="addToFavorites('<%= product._id %>')">
                                <i class="fas fa-heart"></i>
                            </button>
                            <button class="action-button add-to-cart" onclick="addToCart('<%= product._id %>')">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <% }); %>
        </div>
    </section>

    <section class="brand-slideshow">
        <div class="brand-container">
            <div class="brand-track">
                <% brands.forEach((brand)=> { %> <div class="brand-item"> <a href="/shop?brand=<%= brand._id %>"> 
                    <img src="/img/brands/<%= brand.image %>" alt="<%= brand.name %>"> </a> </div>
                    <% }); %>
                        <% brands.forEach((brand)=> { %> <!-- Duplicate items -->
                            <div class="brand-item"> <a href="/shop?brand=<%= brand._id %>"> 
                                <img src="/img/brands/<%= brand.image %>" alt="<%= brand.name %>"> </a> </div>
                            <% }); %>
            </div>
        </div>
    </section>


    <!-- Featured Product Showcase -->
    <section class="featured-showcase" style="background-color: #000; padding: 60px 0">
        <div class="container" style="
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    ">
            <div class="showcase-content" style="flex: 1">
                <h2 style="color: #fff; font-size: 3rem; margin-bottom: 20px">
                    Unleash the<br />
                    <span style="color: #d4af37">
                       <%= product.productName %> 
                    </span> Within!
                </h2>
                <p style="color: #fff; margin-bottom: 30px">
                    <%= product.description %>
                </p>
                <a href="/productDetails/<%= product._id %>" class="shop-now" style="
          color: #d4af37;
          text-decoration: none;
          border-bottom: 2px solid #d4af37;
          padding-bottom: 5px;
          font-weight: bold;
        ">
                    SHOP NOW
                </a>
            </div>
            <div class="showcase-image" style="flex: 1; text-align: right">
                <img src="/img/products/<%= product.productImage[0] %>" alt="<%= product.productName %>"
                    style="max-width: 400px" />
            </div>
        </div>
    </section>


    <section class="services" style="background-color: #11012b; padding: 40px 0">
        <div class="container" style="max-width: 1400px; margin: 0 auto; padding: 0 20px">
            <div class="services-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px">
                <!-- Free Shipping -->
                <div class="service-card" style="
          background: #1a0340;
          padding: 30px;
          border-radius: 10px;
          text-align: center;
        ">
                    <i class="fas fa-shipping-fast" style="font-size: 3rem; color: #4b0082; margin-bottom: 20px"></i>
                    <h3 style="color: #fff; margin-bottom: 15px">FREE SHIPPING</h3>
                    <p style="color: #f8f5f5">
                        Enjoy hassle-free shopping with free shipping on every order! No
                        matter what gaming gear, delivered straight to your doorstep without
                        any extra cost.
                    </p>
                </div>

                <!-- 100% Refund -->
                <div class="service-card" style="
          background: #1a0340;
          padding: 30px;
          border-radius: 10px;
          text-align: center;
        ">
                    <i class="fas fa-undo" style="font-size: 3rem; color: #4b0082; margin-bottom: 20px"></i>
                    <h3 style="color: #fff; margin-bottom: 15px">100% REFUND</h3>
                    <p style="color: #f8f5f5">
                        Shop with confidence! If you're not satisfied with your purchase, we
                        offer a hassle-free refund within 30 days of purchase.
                    </p>
                </div>

                <!-- Support -->
                <div class="service-card" style="
          background: #1a0340;
          padding: 30px;
          border-radius: 10px;
          text-align: center;
        ">
                    <i class="fas fa-headset" style="font-size: 3rem; color: #4b0082; margin-bottom: 20px"></i>
                    <h3 style="color: #fff; margin-bottom: 15px">SUPPORT 24/7</h3>
                    <p style="color: #f8f5f5">
                        We're here for you around the clock! Our dedicated support team is
                        ready to assist you with any questions or concerns.
                    </p>
                </div>
            </div>
        </div>
    </section>

    
   
   

   
   
    <script>
        function addToCart(productId, availableStock) {
    if (availableStock < 1) {
        Swal.fire('Out of Stock', 'This item is currently unavailable.', 'warning');
        return;
    }

    fetch('/cart/addItem', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({ productId, quantity: 1 })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            Swal.fire('Added!', 'The item has been added to your cart.', 'success');
        } else {
            Swal.fire('Error!', data.message || 'Failed to add the item to your cart.', 'error');
        }
    })
    .catch(error => {
        console.error('Error:', error);
        Swal.fire('Error!', 'An error occurred while adding the item to your cart.', 'error');
    });
}
        function addToFavorites(productId) {
            fetch('/wishlist/addItem', {  // Corrected endpoint
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ productId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire('Added!', 'The item has been added to your wishlist.', 'success');
                } else {
                    Swal.fire('Error!', 'Failed to add the item to your wishlist.', 'error');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                Swal.fire('Error!', 'An error occurred while adding the item to your wishlist.', 'error');
            });
        }
    
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".product-card").forEach((card) => {
                const productId = card.querySelector("a").getAttribute("href").split("/").pop();
                card.querySelector(".add-to-cart").addEventListener("click", (e) => {
                    e.stopPropagation();
                    addToCart(productId);
                });
                card.querySelector(".add-to-favorites").addEventListener("click", (e) => {
                    e.stopPropagation();
                    addToFavorites(productId);
                });
                card.querySelector(".product-title").addEventListener("click", (e) => {
                    e.stopPropagation();
                });
            });
        });
    </script>

    <script>
        const brandTrack = document.querySelector('.brand-track');

        brandTrack.addEventListener('mouseover', () => {
            brandTrack.style.animationPlayState = 'paused';
        });

        brandTrack.addEventListener('mouseout', () => {
            brandTrack.style.animationPlayState = 'running';
        });
    </script>


    <%- include('../layouts/user/footer.ejs') %>