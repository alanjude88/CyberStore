<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>CyberCrate</title>
    <link rel="shortcut icon" type="image/png" href="/public/img/cyber.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.7.0/nouislider.min.css">
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<style>
    /* Base Header Styles */
    .header {
        background: #1a0340;
        position: relative;
        border-bottom: 1px solid #2d0668;

    }

    .header__content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px 0;
    }

    .search-form {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: end;
    }

    /* Logo Styles */
    .logo {
        display: flex;
        align-items: center;
        text-decoration: none;
        color: white;
        gap: 10px;
    }

    .logo img {
        height: 40px;
        width: auto;
    }

    .logo span {
        font-size: 24px;
        font-weight: bold;
    }

    /* Navigation Menu */
    .nav-menu {
        display: flex;
        gap: 30px;
        align-items: center;
    }

    .nav-item {
        position: relative;
    }

    .nav-link {
        color: white;
        text-decoration: none;
        font-size: 16px;
        text-transform: uppercase;
        padding: 8px 0;
        display: block;
        transition: color 0.3s;
    }

    .nav-link:hover {
        color: #ff0844;
    }

    /* Dropdown Menus */
    .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        background: #1a0340;
        min-width: 200px;
        border-radius: 4px;
        padding: 8px 0;
        display: none;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
    }

    .nav-item:hover .dropdown-menu {
        display: block;
    }

    .dropdown-menu a {
        color: white;
        text-decoration: none;
        padding: 8px 20px;
        display: block;
        transition: all 0.3s;
    }

    .dropdown-menu a:hover {
        background: #2d0668;
        color: #ff0844;
    }

    /* Mega Menu */
    .mega-menu {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: #1a0340;
        padding: 40px 0;
        display: none;
        z-index: 1000;
        border-top: 1px solid #2d0668;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-item:hover .mega-menu {
        display: block;
    }

    .mega-menu-content {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 30px;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .mega-menu-section h3 {
        color: #ff0844;
        margin-bottom: 20px;
        font-size: 18px;
        text-transform: uppercase;
        font-weight: 600;
    }

    .mega-menu-section ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .mega-menu-section a {
        color: white;
        text-decoration: none;
        font-size: 14px;
        transition: color 0.3s;
    }

    .mega-menu-section a:hover {
        color: #ff0844;
    }

    /* Header Icons */
    .header__icons {
        display: flex;
        align-items: center;
        gap: 20px;
    }

    .icon-link {
        color: white;
        font-size: 20px;
        text-decoration: none;
        transition: color 0.3s;
        position: relative;
    }

    .icon-link:hover {
        color: #ff0844;
    }

    .cart-count {
        position: absolute;
        top: -8px;
        right: -8px;
        background: #ff0844;
        color: white;
        font-size: 12px;
        padding: 2px 6px;
        border-radius: 50%;
    }

    /* Profile Dropdown specific styles */
    .profile-dropdown {
        position: relative;
        display: inline-block;
    }

    .profile-btn {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        padding: 5px;
    }

    .profile-btn:hover {
        color: #ff0844;
    }

    .profile-menu {
        display: none;
        position: absolute;
        right: 0;
        background-color: #1a0340;
        min-width: 220px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        border-radius: 4px;
    }

    .profile-menu a {
        color: white;
        padding: 12px 20px;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .profile-menu a:hover {
        background-color: #2d0668;
        color: #ff0844;
    }

    .profile-menu i {
        width: 20px;
        text-align: center;
    }

    .dropdown-divider {
        height: 1px;
        background: #2d0668;
        margin: 8px 0;
    }

    .show-menu {
        display: block;
    }

    /* Mega Menu */
    .mega-menu {
        position: absolute;
        left: 0;
        top: 100%;
        width: 100%;
        background-color: #1a0340;
        /* Purple background */
        display: none;
        /* Hide by default */
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        /* Add a shadow for depth */
        z-index: 1000;
        /* Ensure it appears above other elements */
    }

    .nav-item:hover .mega-menu {
        display: block;
        /* Show the mega menu on hover */
    }

    .mega-menu-content {
        display: flex;
        flex-wrap: nowrap;
        /* Prevent wrapping */
        padding: 20px;
        justify-content: space-between;
    }

    .mega-menu-section {
        flex: 1;
        padding: 10px;
        color: #fff;
        /* White text color */
        min-width: 200px;
        /* Ensure a minimum width */
        box-sizing: border-box;
        /* Ensure padding is included in width */
    }

    .mega-menu-section h3 {
        margin-bottom: 10px;
        border-bottom: 1px solid #4a0d8c;
        /* Border to separate the header */
        padding-bottom: 5px;
        color: #ffd700;
        /* Bright yellow color for section titles */
    }

    .mega-menu-section ul {
        list-style-type: none;
        padding: 0;
        margin: 0;
    }

    .mega-menu-section ul li {
        margin-bottom: 10px;
    }

    .mega-menu-section ul li a {
        color: #fff;
        /* White text color */
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .mega-menu-section ul li a:hover {
        color: #ffd700;
        /* Bright yellow color on hover */
    }

    /* Sale banner container */
    .sale-banner {
        position: relative;
        overflow: hidden;
        /* Ensures only visible text shows */
        background-color: black;
        /* Background color for contrast */
        white-space: nowrap;
        width: 100%;
        height: 50px;
        /* Adjust height as needed */
        display: flex;
        align-items: center;
    }
    .cart-badge {
    background-color: red;
    color: white;
    font-size: 14px;
    font-weight: bold;
    border-radius: 50%;
    padding: 4px 8px;
    position: absolute;
    top: 5px;
    right: 10px;
    display: none; /* Hide initially */
}

    /* Text that scrolls */
    .sale-banner-content {
        display: inline-block;
        white-space: nowrap;
        background-color: rgb(44, 18, 94);
        animation: scroll-text 15s linear infinite;
        /* Smooth animation */
    }

    /* Animation for marquee effect */
    @keyframes scroll-text {
        from {
            transform: translateX(500%);
            /* Start outside right edge */
        }

        to {
            transform: translateX(-100%);
            /* Move past left edge */
        }
    }

    /* Individual text styling */
    .orange-text {
        color: orange;
    }

    .sale-text {
        color: white;
    }

    .green-text {
        color: green;
    }
</style>

<body>
    <div class="top-info">
        <a href="tel:+919048835352"><i class="fas fa-phone"></i> +91 6282330949</a>
        <a href="mailto:cybercrate@gmail.com"><i class="fas fa-envelope"></i> cyberstore@gmail.com</a>
    </div>


    <header class="header">
        <div class="container">
            <div class="header__content">

                <a href="/" class="logo">
                    <img src="/img/cyber.png" alt="CyberCrate">
                    <span>CYBER STORE</span>
                </a>

                <nav class="nav-menu">
                    <div class="nav-item">
                        <a href="#" class="nav-link">HOME</a>
                        <div class="dropdown-menu">
                            <a href="/">Home Page</a>
                            <a href="/featured">Featured Products</a>
                            <a href="/users/shop?minPrice=5000&maxPrice=500000&sortBy=newArrivals">New Arrivals</a>
                            <a href="/best-sellers">Best Sellers</a>
                        </div>
                    </div>

                    <div class="nav-item">
                        <a href="/users/shop" class="nav-link">SHOP</a>
                    </div>

                    <div class="nav-item">
                        <a href="/users/shop?searchWord=monitor" class="nav-link">Monitors</a>
                    </div>

                    <div class="nav-item">
                        <a href="#" class="nav-link">PC COMPONENTS</a>
                        <div class="mega-menu">
                            <div class="mega-menu-content">
                                <div class="mega-menu-section">
                                    <h3>Components</h3>
                                    <ul>
                                        <li><a href="/components/processors">Processors</a></li>
                                        <li><a href="/components/motherboards">Motherboards</a></li>
                                        <li><a href="/components/graphics-cards">Graphics Cards</a></li>
                                        <li><a href="/components/memory">Memory</a></li>
                                        <li><a href="/components/storage">Storage</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="nav-item">
                        <a href="#" class="nav-link">GAMING PERIPHERALS</a>
                        <div class="dropdown-menu">
                            <a href="/peripherals/mouse">Mouse</a>
                            <a href="/peripherals/keyboard">Keyboard</a>
                            <a href="/peripherals/headphones">Headphones</a>
                            <a href="/peripherals/controller">Controllers</a>
                            <a href="/peripherals/mousepad">Mousepads</a>
                        </div>
                    </div>

                    <div class="nav-item">
                        <a href="/about" class="nav-link">ABOUT</a>
                    </div>
                </nav>

                <div class="header__icons">
                    <!-- <form action="/search" method="get" class="search-form"> 
                        <input type="text" name="searchWord" placeholder="Search...">
                        <button type="submit" class="search-btn"> 
                            <i class="fas fa-search"></i>
                        </button>
                    </form> -->
                    <% if(locals.user) { %>
                        <div class="profile-dropdown">
                            <button type="button" onclick="toggleProfileMenu(event)" class="profile-btn">
                                <%= locals.user.name %> <i class="fas fa-caret-down"></i>
                            </button>
                            <div id="profileDropdown" class="profile-menu">
                                <a href="/profile"><i class="fas fa-user-circle"></i> My Profile</a>
                                <a href="/profile/orders"><i class="fas fa-box"></i> My Orders</a>
                                <a href="/wishlist"><i class="fas fa-heart"></i> My Wishlist</a>
                                <a href="/wallet"><i class="fas fa-wallet"></i> My Wallet</a>
                                <a href="/settings"><i class="fas fa-cog"></i> Settings</a>
                                <div class="dropdown-divider"></div>
                                <a href="/logout"><i class="fas fa-sign-out-alt"></i> Logout</a>
                            </div>
                        </div>
                        <% } else { %>
                            <a href="/auth" class="icon-link">
                                <i class="fas fa-user"></i>
                            </a>
                            <% } %>
                                <a href="/wishlist" class="icon-link">
                                    <i class="fas fa-heart"></i>
                                </a>
                                <a href="/cart" class="icon-link">
                                    <i class="fas fa-shopping-cart"></i>
                                    <span class="cart-count"><%= typeof cartCount !== 'undefined' ? cartCount : 0 %></span>
                                </a>
                                
                </div>

            </div>
        </div>


        <div class="sale-banner">
            <div class="sale-banner-content">
                <span class="orange-text">Republic Day</span>
                <span class="sale-text"> Sale </span>
                <span class="green-text">Starts Tomorrow</span>
                &nbsp;&nbsp;&nbsp;&nbsp;

            </div>
        </div>

        <form action="/users/shop" method="get" class="search-form">
            <input type="text" name="searchWord" placeholder="Search..." value="<%= typeof searchWord !== 'undefined' ? searchWord : '' %>">
        
            <!-- Preserve filters by adding hidden inputs -->
            <% if (typeof selectedCategories !== 'undefined') { %>
                <% selectedCategories.forEach(category => { %>
                    <input type="hidden" name="categories" value="<%= category %>">
                <% }) %>
            <% } %>
        
            <% if (typeof selectedBrands !== 'undefined') { %>
                <% selectedBrands.forEach(brand => { %>
                    <input type="hidden" name="brands" value="<%= brand %>">
                <% }) %>
            <% } %>
        
            <input type="hidden" name="minPrice" value="<%= typeof minPrice !== 'undefined' ? minPrice : 5000 %>">
            <input type="hidden" name="maxPrice" value="<%= typeof maxPrice !== 'undefined' ? maxPrice : 500000 %>">
            <input type="hidden" name="sortBy" value="<%= typeof sortWays !== 'undefined' ? sortWays : 'default' %>">
            
        
            <button type="submit" class="search-btn">
                <i class="fas fa-search"></i>
            </button>
        </form>



    </header>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        function toggleProfileMenu(event) {
            event.preventDefault();
            const menu = document.getElementById('profileDropdown');
            menu.classList.toggle('show-menu');
        }

        window.onclick = function (event) {
            if (!event.target.matches('.profile-btn') && !event.target.matches('.fa-user')) {
                const menu = document.getElementById('profileDropdown');
                if (menu.classList.contains('show-menu')) {
                    menu.classList.remove('show-menu');
                }
            }
        }

        document.addEventListener("DOMContentLoaded", function () {
    updateCartCount();
});

function updateCartCount() {
    fetch('/cart/count') // Replace with your API route to get cart count
        .then(response => response.json())
        .then(data => {
            const cartCountElement = document.getElementById("cart-count");
            if (data.count > 0) {
                cartCountElement.textContent = data.count;
                cartCountElement.style.display = "inline-block"; // Show the badge
            } else {
                cartCountElement.style.display = "none"; // Hide if empty
            }
        })
        .catch(error => console.error("Error fetching cart count:", error));
}
       
    </script>
</body>